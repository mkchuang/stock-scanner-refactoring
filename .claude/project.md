# å°ˆæ¡ˆå…¨è²Œ - Project Overview

## ðŸŽ¯ å°ˆæ¡ˆç°¡ä»‹ (Project Brief)

### å°ˆæ¡ˆç›®æ¨™
æ§‹å»ºä¸€å€‹åŸºæ–¼ AI æŠ€è¡“çš„æ™ºèƒ½è‚¡ç¥¨åˆ†æžå¹³å°ï¼Œæ•´åˆå¤šç¶­åº¦æ•¸æ“šæºå’Œå¤šå€‹ AI æ¨¡åž‹ï¼Œç‚ºæŠ•è³‡è€…æä¾›å°ˆæ¥­ã€å³æ™‚ã€å…¨é¢çš„è‚¡ç¥¨åˆ†æžå ±å‘Šã€‚

### æ ¸å¿ƒåŠŸèƒ½
- **æŠ€è¡“åˆ†æžå¼•æ“Ž**ï¼šæ•´åˆ Kç·šã€MAã€RSIã€MACDã€å¸ƒæž—å¸¶ç­‰å¤šç¨®æŠ€è¡“æŒ‡æ¨™ï¼Œæä¾›é‡åŒ–äº¤æ˜“ä¿¡è™Ÿ
- **åŸºæœ¬é¢è©•ä¼°ç³»çµ±**ï¼šåˆ†æž 25 é …é—œéµè²¡å‹™æŒ‡æ¨™ï¼Œæ”¯æ´è¡Œæ¥­å°æ¯”å’Œæ­·å²è¶¨å‹¢åˆ†æž
- **AI æ™ºèƒ½å ±å‘Š**ï¼šæ•´åˆ OpenAI GPT-4ã€Anthropic Claudeã€æ™ºè­œ AIï¼Œç”Ÿæˆå°ˆæ¥­æŠ•è³‡å»ºè­°
- **æƒ…ç·’åˆ†æžæ¨¡çµ„**ï¼šå³æ™‚åˆ†æžå¸‚å ´æ–°èžå’Œè¼¿æƒ…ï¼Œè©•ä¼°å¸‚å ´æƒ…ç·’å°è‚¡åƒ¹çš„å½±éŸ¿
- **ä¸²æµå³æ™‚æ›´æ–°**ï¼šæŽ¡ç”¨ SSE æŠ€è¡“å¯¦ç¾åˆ†æžéŽç¨‹çš„å³æ™‚æŽ¨é€ï¼Œæå‡ç”¨æˆ¶é«”é©—

### ç›®æ¨™ç”¨æˆ¶
- **å€‹äººæŠ•è³‡è€…**ï¼šéœ€è¦å°ˆæ¥­åˆ†æžå·¥å…·è¼”åŠ©æŠ•è³‡æ±ºç­–çš„æ•£æˆ¶
- **æŠ•è³‡é¡§å•**ï¼šç‚ºå®¢æˆ¶æä¾›æŠ•è³‡å»ºè­°çš„å°ˆæ¥­äººå£«
- **é‡åŒ–äº¤æ˜“è€…**ï¼šéœ€è¦æŠ€è¡“æŒ‡æ¨™å’Œ API æŽ¥å£çš„ç¨‹å¼åŒ–äº¤æ˜“è€…
- **é‡‘èžç ”ç©¶å“¡**ï¼šé€²è¡Œå¸‚å ´ç ”ç©¶å’Œè‚¡ç¥¨åˆ†æžçš„å°ˆæ¥­äººå“¡

## ðŸ—ï¸ ç³»çµ±æž¶æ§‹ (System Patterns)

### æ•´é«”æž¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢   â”‚â”€â”€â”€â”€â–¶â”‚  Flask Web Server â”‚â”€â”€â”€â”€â–¶â”‚ WebStockAnalyzer â”‚
â”‚  (HTML/JS)  â”‚â—€â”€â”€â”€â”€â”‚   (SSE æŽ¨é€)      â”‚â—€â”€â”€â”€â”€â”‚   (åˆ†æžå¼•æ“Ž)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Authentication â”‚         â”‚  Data Source â”‚
                    â”‚   (Session)    â”‚         â”‚  (AKShare)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚            AI APIs                     â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                            â”‚ OpenAI   â”‚ Claude   â”‚   Zhipu AI     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡çµ„
- **WebStockAnalyzer**ï¼šæ ¸å¿ƒåˆ†æžå¼•æ“Žï¼Œæ•´åˆæŠ€è¡“åˆ†æžã€åŸºæœ¬é¢åˆ†æžã€æƒ…ç·’åˆ†æž
- **Flask Web Server**ï¼šæä¾› RESTful API å’Œ SSE å³æ™‚æŽ¨é€ï¼Œè™•ç†ä¸¦ç™¼è«‹æ±‚
- **SSEManager**ï¼šç®¡ç† Server-Sent Events é€£æŽ¥æ± ï¼Œå¯¦ç¾å³æ™‚æ•¸æ“šæŽ¨é€
- **ç·©å­˜ç®¡ç†å™¨**ï¼šä¸‰å±¤ç·©å­˜ï¼ˆåƒ¹æ ¼/åŸºæœ¬é¢/æ–°èžï¼‰ï¼Œæå‡éŸ¿æ‡‰é€Ÿåº¦
- **AI æ•´åˆå±¤**ï¼šçµ±ä¸€ä»‹é¢èª¿ç”¨å¤šå€‹ AI æ¨¡åž‹ï¼Œæ”¯æ´ä¸²æµè¼¸å‡º

### è¨­è¨ˆæ¨¡å¼
- **å·¥å» æ¨¡å¼**ï¼šAI æ¨¡åž‹é¸æ“‡å™¨æ ¹æ“šé…ç½®å‹•æ…‹å‰µå»ºå°æ‡‰çš„ AI å®¢æˆ¶ç«¯
- **å–®ä¾‹æ¨¡å¼**ï¼šåˆ†æžå™¨å¯¦ä¾‹å…¨å±€å”¯ä¸€ï¼Œé¿å…é‡è¤‡åˆå§‹åŒ–
- **è§€å¯Ÿè€…æ¨¡å¼**ï¼šSSE å¯¦ç¾äº‹ä»¶æŽ¨é€ï¼Œå®¢æˆ¶ç«¯è¨‚é–±åˆ†æžé€²åº¦
- **ç­–ç•¥æ¨¡å¼**ï¼šä¸åŒç¶­åº¦çš„åˆ†æžç­–ç•¥å¯ç¨ç«‹æ›¿æ›å’Œæ“´å±•

### åŸ·è¡Œç·’æ¨¡å¼
- **ThreadPoolExecutor**ï¼šæœ€å¤§ 4 å€‹å·¥ä½œç·šç¨‹è™•ç†ä¸¦ç™¼åˆ†æžè«‹æ±‚
- **ç·šç¨‹å®‰å…¨**ï¼šä½¿ç”¨ threading.Lock ä¿è­·å…±äº«è³‡æºï¼ˆä»»å‹™ç‹€æ…‹ã€SSE å®¢æˆ¶ç«¯ï¼‰
- **éžé˜»å¡žè¨­è¨ˆ**ï¼šSSE ä½¿ç”¨ Queue å¯¦ç¾éžé˜»å¡žæ¶ˆæ¯å‚³éž

### é€šè¨Šæ©Ÿåˆ¶
- **RESTful API**ï¼šæ¨™æº– HTTP è«‹æ±‚/éŸ¿æ‡‰æ¨¡å¼
- **Server-Sent Events**ï¼šå–®å‘å³æ™‚æŽ¨é€ï¼Œé©åˆåˆ†æžé€²åº¦æ›´æ–°
- **JSON æ•¸æ“šäº¤æ›**ï¼šçµ±ä¸€çš„æ•¸æ“šåºåˆ—åŒ–æ ¼å¼
- **ç•°æ­¥å›žèª¿**ï¼šAI ä¸²æµè¼¸å‡ºé€šéŽå›žèª¿å‡½æ•¸å³æ™‚è™•ç†

## ðŸ”§ æŠ€è¡“ä¸Šä¸‹æ–‡ (Tech Context)

### æŠ€è¡“æ£§
- **å¾Œç«¯èªžè¨€**ï¼šPython 3.11
- **Web æ¡†æž¶**ï¼šFlask 2.x + Flask-CORS
- **æ•¸æ“šä¾†æº**ï¼šAKShareï¼ˆAè‚¡å¸‚å ´æ•¸æ“šï¼‰
- **AI æœå‹™**ï¼šOpenAI APIã€Anthropic APIã€Zhipu AI API
- **å³æ™‚é€šè¨Š**ï¼šServer-Sent Events (SSE)
- **æ•¸æ“šè™•ç†**ï¼šPandasã€NumPy

### é–‹ç™¼ç’°å¢ƒ
- **ä½œæ¥­ç³»çµ±**ï¼šè·¨å¹³å°ï¼ˆLinux/Windows/macOSï¼‰
- **Python ç‰ˆæœ¬**ï¼š3.9+ï¼ˆå»ºè­° 3.11ï¼‰
- **IDE/ç·¨è¼¯å™¨**ï¼šVS Codeã€PyCharm
- **ç‰ˆæœ¬æŽ§åˆ¶**ï¼šGit

### å»ºç½®ç’°å¢ƒ
- **ä¾è³´ç®¡ç†**ï¼špip + requirements.txt
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **WSGI æœå‹™å™¨**ï¼šGunicornï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
- **åå‘ä»£ç†**ï¼šNginxï¼ˆå¯é¸ï¼‰

### é‹è¡Œç’°å¢ƒ
- **ç›®æ¨™å¹³å°**ï¼šx86_64 Linux/Windows
- **è¨˜æ†¶é«”éœ€æ±‚**ï¼šå»ºè­° 2GB+ï¼ˆDocker é…ç½®é™åˆ¶ï¼‰
- **CPU éœ€æ±‚**ï¼šå»ºè­° 2 æ ¸å¿ƒ+
- **ç¶²è·¯éœ€æ±‚**ï¼šéœ€è¦è¨ªå•å¤–éƒ¨ API æœå‹™

### æŠ€è¡“é™åˆ¶
- **API é€ŸçŽ‡é™åˆ¶**ï¼šä¾è³´ç¬¬ä¸‰æ–¹ AI æœå‹™çš„é…é¡
- **æ•¸æ“šæºé™åˆ¶**ï¼šAKShare å…è²»æŽ¥å£æœ‰è«‹æ±‚é »çŽ‡é™åˆ¶
- **ä¸¦ç™¼é™åˆ¶**ï¼šThreadPoolExecutor æœ€å¤§ 4 ç·šç¨‹
- **ç·©å­˜ç­–ç•¥**ï¼šå…§å­˜ç·©å­˜ï¼Œé‡å•Ÿå¾Œå¤±æ•ˆ

### ç›¸ä¾é—œä¿‚
- **æ ¸å¿ƒä¾è³´**ï¼š
  - Flask==2.xï¼ˆWeb æ¡†æž¶ï¼‰
  - pandas>=1.3ï¼ˆæ•¸æ“šåˆ†æžï¼‰
  - akshare>=1.8ï¼ˆè‚¡ç¥¨æ•¸æ“šï¼‰
  - openai>=1.0ï¼ˆAI æŽ¥å£ï¼‰
- **é–‹ç™¼ä¾è³´**ï¼š
  - python-dotenvï¼ˆç’°å¢ƒè®Šé‡ï¼‰
  - pytestï¼ˆå–®å…ƒæ¸¬è©¦ï¼‰
- **ç‰ˆæœ¬è¦æ±‚**ï¼š
  - Python >= 3.9
  - Docker >= 20.10
  - Docker Compose >= 1.29

---
*å»ºç«‹æ™‚é–“: 2025-01-27*
*æœ€å¾Œæ›´æ–°: 2025-01-27*
